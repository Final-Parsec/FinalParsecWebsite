<!DOCTYPE HTML>
<!--
	forked from:
	Dopetrope by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Building a Leaderboard System</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="/theme/css/ie/html5shiv.js"></script><![endif]-->
        <script type="application/javascript">
            var FINAL_PARSEC_THEME_STATIC_DIR = '/theme' + '/';
        </script>
		<script src="/theme/js/jquery.min.js"></script>
		<script src="/theme/js/jquery.dropotron.min.js"></script>
		<script src="/theme/js/skel.min.js"></script>
		<script src="/theme/js/skel-layers.min.js"></script>
		<script src="/theme/js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="/theme/css/skel.css" />
			<link rel="stylesheet" href="/theme/css/style.css" />
			<link rel="stylesheet" href="/theme/css/style-desktop.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="/theme/css/ie/v8.css" /><![endif]-->

        <!-- For Unity Web Player -->
        <script type="text/javascript" src="//webplayer.unity3d.com/download_webplayer-3.x/3.0/uo/UnityObject2.js"></script>
        <![if IE]>
        <script type='text/javascript'>
        if(/*@cc_on!@*/false)
        var bIsIE = 1;
        </script>
        <![endif]>
        <script language="javascript1.1" type="text/javascript">
            function detectUnityWebPlayer () {
                var tInstalled = false;
                if (typeof (bIsIE) != 'undefined') {
                    tInstalled = true;
                }
                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {
                   // MSIE
                    tInstalled = true;
                }

                if (navigator.appVersion.indexOf("MSIE") != -1 &&
                    navigator.appVersion.toLowerCase().indexOf("win") != -1)
                {
                    tInstalled = detectUnityWebPlayerActiveX();
                }
                else if (navigator.mimeTypes && navigator.mimeTypes["application/vnd.unity"])
                {
                    if (navigator.mimeTypes["application/vnd.unity"].enabledPlugin &&
                        navigator.plugins && navigator.plugins["Unity Player"])
                    {
                        tInstalled = true;
                    }
                }
                return tInstalled;
            }
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37270839-4', 'auto');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
	</head>
<body class="right-sidebar">
<!-- Header -->
<div id="header-wrapper">
    <div id="header">

        <!-- Logo -->
        <h1><a href="/index.html">FINAL PARSEC</a></h1>

<!-- Nav -->
<nav id="nav">
    <ul>
        <li><a href="/index.html">Home</a></li>
        <li>
            <a href="#" onclick="return false;">Games</a>
            <ul>
                    <li><a href="/category/nauticus.html">Nauticus</a></li>
                    <li><a href="/category/space-snakes-legacy-earth.html">Space Snakes: Legacy Earth</a></li>
                    <li><a href="/category/space-snakes-prototype.html">Space Snakes : Prototype</a></li>
                    <li><a href="/category/tower-defense.html">Tower Defense</a></li>
                    <li><a href="/category/unity-masters.html">Unity Masters</a></li>
            </ul>
        </li>
        <li><a href="/tag/tutorial.html">Tutorials</a></li>
        <li><a href="/archives.html">Blog</a></li>
        <li><a href="/static_pages/about.html">About</a></li>
    </ul>
</nav>
    </div>
</div>
    <!-- Main -->
        <div id="main-wrapper">
            <div class="container">
                <div class="row">
                    <div class="8u">

                        <!-- Content -->
                            <article class="box post">
                                <a href="#" class="image featured">
                                    <img onerror="this.parentNode.parentNode.removeChild(this.parentNode);"
                                         src="/theme/images/post-header/building-a-leaderboard-system.jpg" alt="" />
                                </a>
                                <header>
                                    <h2>Building a Leaderboard System</h2>
                                    <p>Sun 29 March 2015</p>
                                </header>
                                <p>Our ultimate goal is to create a system which can track a variety of leaderboards for our games here at Final Parsec.
The general idea is that after a player wins a game, they'll be given a numeric score which can be used to rank all players globally.
We target a variety of platforms with our games and almost every single one will need to submit and view scores.
It's likely we will want to display the leaderboards on our website too at some point.
Pretty much everything is going to be doing this same thing.
Maybe we should build an API to handle it.</p>
<h3>Designing the API</h3>
<p>There's not much to this. The system tracks a collection of <strong>scores</strong>.</p>
<p>Each score has the following attributes:
<em> Player's Name
</em> A Numeric Score
* Assignment to a Leaderboard</p>
<pre class='apply-line-numbers'><code class='hljs apache'>create table if not exists scores
(
    id int unsigned not null auto_increment,
    player_name VARCHAR(20), 
    score int unsigned,
    leaderboard_name varchar(100)
);
</code></pre>

<blockquote>
<h3>GET /scores/{leaderboard_name}</h3>
<p>Requests a list of scores within a certain leaderboard.</p>
</blockquote>
<hr />
<p>As you may or may not have noticed, our website is entirely comprised of static files.
We do this despite the fact that our site has a large amount of somewhat dynamic content (for instance, the blog you're reading right now).
This is accomplished by using a static site generator (<a href="http://docs.getpelican.com/">Pelican</a>) and letting Apache serve the output straight off the file system.
The primary benefits include:
<ul class=default>
    <li>Tracking changes and entire history of the site is as easy as keeping it under version control.</li> 
    <li>No server side scripting or processing to speak of.</li>
    <li>We don't need to query a database.</li>
</ul>
These last two help cut down on the response time when a user requests content which is vitally important.</p>
<p>One side effect of taking this approach is that browsers can pretty aggressively cache the resources that compose your site.
This can either be a really good or really bad thing depending on the nature of your site.
Browsers caching your content can result in very quick render times, but users may be looking at stale content.
As I mention earlier in the article, our site changes frequently as we update it with new posts and such.
This means a user seeing stale content is a problem for us.</p>
<p>There are several ways you can tell a browser to avoid caching (or at least check for an updated version) primarily through the use of HTTP headers.
The header we're going to be interested in is the <strong>cache-control</strong> header.
A few others headers exist to manipulate caching behavior. If you want to dive into more information, <a href="http://www.mobify.com/blog/beginners-guide-to-http-cache-headers/">take a look at this blog post</a>.</p>
<p>We can use the Apache module <a href="http://httpd.apache.org/docs/2.2/mod/mod_expires.html">mod_expires</a> to manipulate this header.</p>
<p>Prior to enabling this module, you'll want to add rules to your virtual host file (you can also put this configuration information in <strong>.htaccess</strong>).
Our rules allow clients to cache content for 1 month with the exception of <strong>html</strong> files.
These expire immediately requiring the browser to check with our server before using a cached version of the content.
Using this strategy, we get the benefits of caching where it matters (larger files like images and frequently requested files like CSS) while getting the guarantee users will always see fresh content.</p>
<pre class='apply-line-numbers'><code class='hljs apache'>&lt;IfModule mod_expires.c&gt;
    ExpiresActive on
    ExpiresDefault          "access plus 1 month"

    ExpiresByType text/html "access plus 0 seconds"
&lt;/IfModule&gt;
</code></pre>

<p>Once you've modified your configuration, enable the mod_expires module.
<pre class='apply-line-numbers'><code class='hljs bash'></code>sudo a2enmod expires</pre></p>
<p>Then restart apache to ensure your changes take effect.
<pre class='apply-line-numbers'><code class='hljs bash'></code>sudo service apache2 restart</pre></p>
                                <hr>
                                <p>Posted to: <a href="/category/tower-defense.html">Tower Defense</a></p>
    <p>
            <a href="/tag/web-dev.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> web-dev</a><br>
            <a href="/tag/tutorial.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> tutorial</a><br>
            <a href="/tag/apache.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> apache</a><br>
            <a href="/tag/mysql.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> mysql</a><br>
            <a href="/tag/tower-defense.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> tower-defense</a><br>
            <a href="/tag/unity.html" class="tag" style="color:black; text-decoration: none;"><i class="fa fa-tag"></i> unity</a><br>
    </p>
                            </article>

                    </div>
                    <div class="4u">

                        <!-- Sidebar -->
                            <section class="box">
                                <a href="/author/baer.html" class="image featured"><img src="/theme/images/author-portrait/Baer.jpg" alt="" /></a>
                                <header>
                                    <h3>Baer</h3>
                                </header>
                                <p>
                                        Director of Snacks
                                </p>
                                <footer>
                                    <a href="/author/baer.html" class="button alt">My Articles</a>
                                </footer>
                            </section>
                            <section class="box">
                                <header>
                                    <h3>Latest Tweets</h3>
                                </header>

                                <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/Final_Parsec" data-widget-id="564606085340729344">Tweets by @Final_Parsec</a>
                                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                            </section>
                    </div>
                </div>
            </div>
        </div>

    <!-- Footer -->
        <div id="footer-wrapper">
            <section id="footer" class="container">
                <div class="row">
                    <div class="8u">
                    </div>

<div class="4u">
    <section>
        <header>
            <h2>What's a Final Parsec?</h2>
        </header>
        <a href="#" class="image featured"><img src="/theme/images/final_parsec.jpg" alt="" /></a>
        <p>
            <strong>Final Parsec</strong> is an up and coming indie game development studio in North Texas.
        </p>
        <p>
            Our game development team consists of<br>
            <a href="/author/matt.html">Matt Bauer</a>, <a href="/author/baer.html">Baer Bradford</a>, and <a href="/author/tj.html">TJ Brosnan</a>.
        </p>
        <footer>
            <a href="/static_pages/about.html" class="button">Find out more</a>
        </footer>
    </section>

    <section>
        <header>
            <h2>Social</h2>
        </header>
        <ul class="social">
            <li><a class="icon fa-twitter" href="https://twitter.com/Final_Parsec"><span class="label">@FinalParsec</span></a></li>
            <li><a class="icon fa-youtube" href="https://www.youtube.com/channel/UCHcxGunEdEPlgq5JulJ2fYQ"><span class="label">Tutorials & Streams</span></a></li>
        </ul>
    </section>
</div>                </div>

<div class="row">
    <div class="12u">

        <!-- Copyright -->
            <div id="copyright">
                <ul class="links">
                    <li>&copy; 2015 Final Parsec - All Rights Reserved</li>
                </ul>
            </div>
    </div>
</div>            </section>
        </div>
</body>
</html>